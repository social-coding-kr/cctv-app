<ion-view view-title="개발자용">
  <ion-content>
    <h4>developer page</h4>
    

    <div><button class="button button-stable button-block" ng-click="test_button1_click()">
      {{test_button1_text}}
    </button></div>  

    <ul>
      <li ng-repeat="x in cctvs">
        ID: {{ x.cctvId  }} , Image: {{ x.cctvImage }}
      </li>
    </ul>

    <textarea name="develLog" id="devel_log" readonly="readonly">
      {{ console_text }}
    </textarea>
    <button class="button button-stable" ng-click="applog.clear()">
      로그 삭제
    </button>
    
    <button class="button button-stable" ng-click="update_apk('apk')">
      앱 업데이트(main)
    </button>

    <button class="button button-stable" ng-click="update_apk('kyshin')">
      앱 업데이트(kyshin)
    </button>

    <button class="button button-stable" ng-click="check_installed()">
      {{ app_installed }}
    </button>

    <button class="button button-stable" ng-click="uninstall_apk()">
      앱 제거
    </button>

    <div>
      <button class="button button-icon" href="#"
        onclick="
    var url = encodeURI('http://147.46.215.152:9000/kyshin/android-debug.apk');
    var target = 'android-debug.apk';
    var localpath = cordova.file.externalDataDirectory + target;

    //alert('download ' + url + ' -> ' + target);       
    //alert(cordova.file.dataDirectory)
    //cordova.file.applicationStorageDirectory
    //cordova.file.cacheDirectoryds
    function nothing() { }
    function webintent_on_error() {
        alert('Failed to open URL via Android Intent.' + error.code);
    }

    function appinstall(entry) {
        window.plugins.webintent.startActivity({
                action: window.plugins.webintent.ACTION_VIEW,
                url: entry.toURL(),
                type: 'application/vnd.android.package-archive'
            },
            nothing,
            function () {
                alert('Failed to open URL via Android Intent.' + entry.toURL());
            }
        )
    }

    function download_on_error(error) {
        alert('download 실패 ' + error.code);
    }

    var filetransfer = new FileTransfer();
    alert('download ' + url + ' -> ' + localpath);
    filetransfer.download(url, localpath,
        appinstall,
        download_on_error,
        false, {}
    );

    ">

          <i class="icon ion-compose">다운로드  FileTransfer</i>
      </button>
    </div>    

    <!--
    <div><button class="button button-icon" href="#"
        onclick="update_apk('kyshin/debug.apk', 'debug.apk')">
      <i class="icon ion-compose"> sky1core app UPDATE</i>
    </button></div>
    -->
    
    
  </ion-content>
</ion-view>